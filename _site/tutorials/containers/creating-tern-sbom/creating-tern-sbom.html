<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Introduction | sbomgen</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Introduction" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="List of SBOM Generation Tools" />
<meta property="og:description" content="List of SBOM Generation Tools" />
<link rel="canonical" href="http://localhost:4000/tutorials/containers/creating-tern-sbom/creating-tern-sbom.html" />
<meta property="og:url" content="http://localhost:4000/tutorials/containers/creating-tern-sbom/creating-tern-sbom.html" />
<meta property="og:site_name" content="sbomgen" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Introduction" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"List of SBOM Generation Tools","headline":"Introduction","url":"http://localhost:4000/tutorials/containers/creating-tern-sbom/creating-tern-sbom.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=d1481bd57f2bd98144d286b157a673827e676eae">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">sbomgen</a></h1>
      

      <h2 id="introduction">Introduction</h2>

<p>This tutorial illustrates how to create SBOMs from containers using the tern CLI.</p>

<h2 id="requirements--dependencies">Requirements &amp; Dependencies</h2>

<ul>
  <li>Git.</li>
  <li>attr.</li>
  <li>Python 3.6 or newer.</li>
  <li>Pip.</li>
  <li>jq.</li>
  <li>skopeo.</li>
</ul>

<h2 id="installation">Installation</h2>

<p>Install tern by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>tern
</code></pre></div></div>

<p>Verify installation by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern <span class="nt">-h</span>
</code></pre></div></div>

<p>You should see:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: Tern <span class="o">[</span><span class="nt">-h</span><span class="o">]</span> <span class="o">[</span><span class="nt">-q</span><span class="o">]</span> <span class="o">[</span><span class="nt">-l</span> FILE] <span class="o">[</span><span class="nt">-c</span><span class="o">]</span> <span class="o">[</span><span class="nt">-k</span><span class="o">]</span> <span class="o">[</span><span class="nt">-r</span><span class="o">]</span> <span class="o">[</span><span class="nt">-wd</span> PATH] <span class="o">[</span><span class="nt">-dr</span> DRIVER_OPTION]
            <span class="o">[</span><span class="nt">-v</span><span class="o">]</span>
            <span class="o">{</span>report,lock,debug<span class="o">}</span> ...

    Tern is a container image component curation tool. Tern retrieves
    information about packages that are installed <span class="k">in </span>a container image.
    Learn more at https://github.com/tern-tools/tern

positional arguments:
  <span class="o">{</span>report,lock,debug<span class="o">}</span>   Subcommands
    report              Create a BoM report. Run <span class="s1">'tern report -h'</span> <span class="k">for </span>report format options.
    lock                Create an annotated Dockerfile that will pin the information it finds. Use this option to <span class="nb">help </span>achieve a more repeatable container image build.
    debug               Debug pieces of operation by themselves. This is useful when debugging scripts entered into the <span class="nb">command </span>library or drivers used <span class="k">for </span>mounting the container image layers.

optional arguments:
  <span class="nt">-h</span>, <span class="nt">--help</span>            show this <span class="nb">help </span>message and <span class="nb">exit</span>
  <span class="nt">-q</span>, <span class="nt">--quiet</span>           Silences the output to the terminal<span class="p">;</span>Useful when logging behaviour unnecessary
  <span class="nt">-l</span> FILE, <span class="nt">--log-file</span> FILE
                        Provide a custom file to write logs to.
                        Useful when writing logs to a different location.
  <span class="nt">-c</span>, <span class="nt">--clear-cache</span>     Clear the cache before running
  <span class="nt">-k</span>, <span class="nt">--keep-wd</span>         Keep the working directory after execution. Useful when debugging container images
  <span class="nt">-r</span>, <span class="nt">--redo</span>            Repopulate the cache <span class="k">for </span>found layers
  <span class="nt">-wd</span> PATH, <span class="nt">--working-dir</span> PATH
                        Change default working directory to specified absolute path.
  <span class="nt">-dr</span> DRIVER_OPTION, <span class="nt">--driver</span> DRIVER_OPTION
                        Choose from the following storage drivers: 
                        overlay2: Use the kernel<span class="s1">'s overlay2 storage driver
                        fuse: Use the fuse-overlayfs system tool
                        If no option is given, the default method of applying container layers in userspace will be used.
  -v, --version         show program'</span>s version number and <span class="nb">exit</span>
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<h3 id="from-images">From Images</h3>

<p>Create an SBOM file with tern by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-o</span> &lt;output.file&gt; <span class="nt">-i</span> &lt;container:image&gt; <span class="nt">-f</span> &lt;output-format&gt;
</code></pre></div></div>

<p>with the <code class="language-plaintext highlighter-rouge">&lt;output-format&gt;</code> being one of:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">spdxtagvalue</code></li>
  <li><code class="language-plaintext highlighter-rouge">spdxjson</code></li>
  <li><code class="language-plaintext highlighter-rouge">cyclonedxjson</code></li>
  <li><code class="language-plaintext highlighter-rouge">json</code></li>
  <li><code class="language-plaintext highlighter-rouge">yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">html</code></li>
</ul>

<p>You can create raw outputs to terminal by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-i</span> &lt;container:image&gt;
</code></pre></div></div>

<p>You can create SBOM formatted outputs to terminal by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-i</span> &lt;container:image&gt; <span class="nt">-f</span> &lt;output-format&gt;
</code></pre></div></div>

<p>This raw output can be saved to a file by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-i</span> &lt;container:image&gt; <span class="nt">-o</span> &lt;output.file&gt;
</code></pre></div></div>

<h3 id="from-dockerfiles">From Dockerfiles</h3>

<p>To create outputs SBOMs from Dockerfiles, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-d</span> &lt;path/to/Dockerfile&gt; <span class="nt">-f</span> &lt;output-format&gt; <span class="nt">-o</span> &lt;output-file&gt;
</code></pre></div></div>

<p>For raw output to terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-d</span> &lt;path/to/Dockerfile&gt;
</code></pre></div></div>

<p>For SBOM formatted output to terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-d</span> &lt;path/to/Dockerfile&gt; <span class="nt">-f</span> &lt;output-format&gt;
</code></pre></div></div>

<p>For raw output to file</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tern report <span class="nt">-d</span> &lt;path/to/Dockerfile&gt; <span class="nt">-o</span> &lt;output-file&gt;
</code></pre></div></div>

<h2 id="notes">Notes</h2>

<ul>
  <li>
    <p>Issues arose with installation and running on Ubuntu 20.04. Skopeo does not appear to be available as a package in Ubuntu 20.04. These issues did not arise in Ubuntu 22.04.</p>
  </li>
  <li>
    <p>Ensure your Python version and the Python version your Pip downloads to are the same should you have multiple different python versions on your machine.</p>
  </li>
  <li>
    <p>SBOMs generated by this tool may create license IDs that are <strong>out of specification</strong> for the Cyclonedx schema. This will render the BOM invalid.</p>
  </li>
</ul>

<h2 id="references">References</h2>

<ul>
  <li>
    <p>Tern-Tools. (n.d.). Tern-Tools/tern: Tern is a software composition analysis tool and python library that generates a software bill of materials for container images and dockerfiles. the SBOM that tern generates will give you a layer-by-layer view of whatâ€™s inside your container in a variety of formats including human-readable, JSON, HTML, SPDX and more. GitHub. <a href="https://github.com/tern-tools/tern">https://github.com/tern-tools/tern</a></p>
  </li>
  <li>
    <p>Containers. (n.d.). Containers/Skopeo: Work with remote images registries - retrieving information, images, signing content. GitHub. <a href="https://github.com/containers/skopeo">https://github.com/containers/skopeo</a></p>
  </li>
  <li>
    <p>CycloneDX v1.3 JSON reference. OWASP CycloneDX Software Bill of Materials (SBOM) Standard. (n.d.). <a href="https://cyclonedx.org/docs/1.3/">https://cyclonedx.org/docs/1.3/</a></p>
  </li>
</ul>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/REestwick/sbomgen/edit/gh-pages/tutorials/containers/creating-tern-sbom/creating-tern-sbom.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
