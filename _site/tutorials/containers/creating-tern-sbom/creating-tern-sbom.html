<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Introduction | sbomgen</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Introduction" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="List of SBOM Generation Tools" />
<meta property="og:description" content="List of SBOM Generation Tools" />
<link rel="canonical" href="http://localhost:4000/tutorials/containers/creating-tern-sbom/creating-tern-sbom.html" />
<meta property="og:url" content="http://localhost:4000/tutorials/containers/creating-tern-sbom/creating-tern-sbom.html" />
<meta property="og:site_name" content="sbomgen" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Introduction" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"List of SBOM Generation Tools","headline":"Introduction","url":"http://localhost:4000/tutorials/containers/creating-tern-sbom/creating-tern-sbom.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=4a9305dd5bc783a8a3e7d3d4dfaa1f0e32970f54">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">sbomgen</a></h1>
      

      <h2 id="introduction">Introduction</h2>

<p>This tutorial illustrates how to create SBOMs from containers using the tern CLI.</p>

<h2 id="requirements--dependencies">Requirements &amp; Dependencies</h2>

<ul>
  <li>Git.</li>
  <li>attr.</li>
  <li>Python 3.6 or newer.</li>
  <li>Pip.</li>
  <li>jq.</li>
  <li>skopeo.</li>
</ul>

<h2 id="installation">Installation</h2>

<p>Install tern by running:</p>

<p><code class="language-plaintext highlighter-rouge">pip install tern</code></p>

<p>Verify installation by running:</p>

<p><code class="language-plaintext highlighter-rouge">tern -h</code></p>

<p>You should see:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: Tern [-h] [-q] [-l FILE] [-c] [-k] [-r] [-wd PATH] [-dr DRIVER_OPTION]
            [-v]
            {report,lock,debug} ...

    Tern is a container image component curation tool. Tern retrieves
    information about packages that are installed in a container image.
    Learn more at https://github.com/tern-tools/tern

positional arguments:
  {report,lock,debug}   Subcommands
    report              Create a BoM report. Run 'tern report -h' for report format options.
    lock                Create an annotated Dockerfile that will pin the information it finds. Use this option to help achieve a more repeatable container image build.
    debug               Debug pieces of operation by themselves. This is useful when debugging scripts entered into the command library or drivers used for mounting the container image layers.

optional arguments:
  -h, --help            show this help message and exit
  -q, --quiet           Silences the output to the terminal;Useful when logging behaviour unnecessary
  -l FILE, --log-file FILE
                        Provide a custom file to write logs to.
                        Useful when writing logs to a different location.
  -c, --clear-cache     Clear the cache before running
  -k, --keep-wd         Keep the working directory after execution. Useful when debugging container images
  -r, --redo            Repopulate the cache for found layers
  -wd PATH, --working-dir PATH
                        Change default working directory to specified absolute path.
  -dr DRIVER_OPTION, --driver DRIVER_OPTION
                        Choose from the following storage drivers: 
                        overlay2: Use the kernel's overlay2 storage driver
                        fuse: Use the fuse-overlayfs system tool
                        If no option is given, the default method of applying container layers in userspace will be used.
  -v, --version         show program's version number and exit
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<h3 id="from-images">From Images</h3>

<p>Create an SBOM file with tern by running:</p>

<p><code class="language-plaintext highlighter-rouge">tern report -o &lt;output.file&gt; -i &lt;container:image&gt; -f &lt;output-format&gt;</code></p>

<p>with the <code class="language-plaintext highlighter-rouge">&lt;output-format&gt;</code> being one of:</p>

<ul>
  <li>spdxtagvalue</li>
  <li>spdxjson</li>
  <li>cyclonedxjson</li>
  <li>json</li>
  <li>yaml</li>
  <li>html</li>
</ul>

<p>You can create raw outputs to terminal by running:</p>

<p><code class="language-plaintext highlighter-rouge">tern report -i &lt;container:image&gt;</code></p>

<p>You can create SBOM formatted outputs to terminal by running:</p>

<p><code class="language-plaintext highlighter-rouge">tern report -i &lt;container:image&gt; -f &lt;output-format&gt;</code></p>

<p>This raw output can be saved to a file by running:</p>

<p><code class="language-plaintext highlighter-rouge">tern report -i &lt;container:image&gt; -o &lt;output.file&gt;</code></p>

<h3 id="from-dockerfiles">From Dockerfiles</h3>

<p>To create outputs SBOMs from Dockerfiles, run:</p>

<p><code class="language-plaintext highlighter-rouge">tern report -d &lt;path/to/Dockerfile&gt; -f &lt;output-format&gt; -o &lt;output-file&gt;</code></p>

<p>For raw output to terminal:</p>

<p><code class="language-plaintext highlighter-rouge">tern report -d &lt;path/to/Dockerfile&gt;</code></p>

<p>For SBOM formatted output to terminal:</p>

<p><code class="language-plaintext highlighter-rouge">tern report -d &lt;path/to/Dockerfile&gt; -f &lt;output-format&gt;</code></p>

<p>For raw output to file</p>

<p><code class="language-plaintext highlighter-rouge">tern report -d &lt;path/to/Dockerfile&gt; -o &lt;output-file&gt;</code></p>

<h2 id="notes">Notes</h2>

<ul>
  <li>
    <p>Issues arose with installation and running on Ubuntu 20.04. Skopeo does not appear to be available as a package in Ubuntu 20.04. These issues did not arise in Ubuntu 22.04.</p>
  </li>
  <li>
    <p>Ensure your Python version and the Python version your Pip downloads to are the same should you have multiple different python versions on your machine.</p>
  </li>
  <li>
    <p>SBOMs generated by this tool may create license IDs that are <strong>out of specification</strong> for the Cyclonedx schema. This will render the BOM invalid.</p>
  </li>
</ul>

<h2 id="references">References</h2>

<ul>
  <li>
    <p>https://github.com/tern-tools/tern</p>
  </li>
  <li>
    <p>https://github.com/containers/skopeo</p>
  </li>
  <li>
    <p>https://cyclonedx.org/docs/1.3/</p>
  </li>
</ul>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/REestwick/sbomgen/edit/gh-pages/tutorials/containers/creating-tern-sbom/creating-tern-sbom.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
